<!DOCTYPE html>
    <head>
        <title>Tapestry</title>
	<script src="constants.js"></script>
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/modal-video.min.css">

        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-129112031-1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'UA-129112031-1');
        </script>

        <!-- jQuery dependency -->
        <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
        <script src="js/jquery-modal-video.min.js"></script>

        <!-- For testing -->
        <script src="js/smooth.js"></script>
        <script src="js/gremlins.min.js"></script>
        <script src="js/testing.js"></script>

        <script src="js/gif.js"></script>

        <!-- Core Tapestry JS -->
        <script src="js/tools.js"></script>
        <script src="js/sylvester.js"></script>
        <script src="js/math.js"></script>
        <script src="js/arcball.js"></script>
        <script src="js/tapestry.js"></script>

        <!-- For minified version -->
        <!-- <script src="js/tapestry.min.js></script> -->
        <script>
            $(document).ready(function(){
                var width = screen.availWidth;
                var height = screen.availHeight;

                $(".hyperimage").css({
                    width: width,
                    height: height,
                })

		var tapestry_server = TAPESTRY_HOST;
		$(".hyperimage").tapestry({
                    host: tapestry_server,
                    n_tiles: 4,
                    width: height,
                    height: height,
                    low_res: 256,
                    zoom: 3000,
                    error_callback: function(){
                        $(".tapestry-tile-base").html('<span class="error">Oops, looks like our servers are off. Send us an email at seelab AT eecs.utk.edu</span>');
                        $(".tapestry-tile-base").css({
                            background: "url('turbine_image.png')",
                            backgroundSize: '70%',
                            backgroundPosition: 'center',
                            backgroundRepeat: 'no-repeat',
                            paddingTop: '60px',
                            fontFamily: 'arial',
                            color: 'white',
                        });
                    }
                });


                // Listen to slider events and change the 
                // isosurface threshold accordingly
                $(".threshold-slider").on("input", function(){
                    $(".hyperimage").eq(1).data("tapestry")
                        .settings.isovalues=[parseInt($(this).val())];
                    $(".hyperimage").eq(1).data("tapestry").render(0);
                });
                $(".js-modal-btn").modalVideo();
            });
        </script>
    </head>
    <body style="background: #1b1b1b;">
        <div class="logo"><span class="t">T</span><span class="rest">apestry</span></div>
        <ul class="topnav">
            <li><a href="about.html">About</a></li>
            <li><a class="active" href="index.html">Demo</a></li>
            <li><a href="usecases.html">Use Cases</a></li>
            <li><a class="js-modal-btn" data-video-id="khHgYXTix18">Video</a></li>
            <li><a href="https://github.com/seelabutk/tapestry">Github</a></li>
            <li><a href="https://ieeexplore.ieee.org/document/8523628">Publication</a></li>
        </ul>
        <div class="info-text">
            <p>
            This hyperimage shows an interactive render of a scanned 3D-printed turbine blade courtesy of <a class="link" href="https://neutrons.ornl.gov/sns">Spallation Neutron Source (SNS)</a> and <a class="link" href="https://www.ornl.gov">Oak Ridge National Lab (ORNL)</a>
            <br>
            The size of the dataset is 7.5GB and is being rendered on the fly using Tapestry
            </p>
        </div>
        <div class="hyperimage" data-dataset="turbine" data-colormap="Greys" data-isovalues="0.0009">
            Oops. Looks like our servers are down. Send us an email at seelab AT eecs.utk.edu.
        </div>
        <div class="wrapper">
            <div class="footer">Powered by <a href="https://software.intel.com/en-us/rendering-framework">Intel&reg; oneAPI Rendering Toolkit</a></div>
        </div>
    </body>
</html>

